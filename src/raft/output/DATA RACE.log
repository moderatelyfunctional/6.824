Test (2C): unreliable churn ...
==================
WARNING: DATA RACE
Write at 0x00c000462450 by goroutine 161:
  runtime.slicecopy()
      /usr/local/Cellar/go/1.18.4/libexec/src/runtime/slice.go:295 +0x0
  6.824/raft.(*Raft).AppendEntries()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/raft/raft_append_entries.go:73 +0x85c
  runtime.call32()
      /usr/local/Cellar/go/1.18.4/libexec/src/runtime/asm_amd64.s:702 +0x48
  reflect.Value.Call()
      /usr/local/Cellar/go/1.18.4/libexec/src/reflect/value.go:339 +0xd7
  6.824/labrpc.(*Service).dispatch()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/labrpc/labrpc.go:496 +0x47b
  6.824/labrpc.(*Server).dispatch()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/labrpc/labrpc.go:420 +0x265
  6.824/labrpc.(*Network).processReq.func1()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/labrpc/labrpc.go:240 +0x9c

Previous read at 0x00c000462450 by goroutine 67:
  reflect.Value.Int()
      /usr/local/Cellar/go/1.18.4/libexec/src/reflect/value.go:1403 +0xa6
  encoding/gob.encInt()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encode.go:188 +0x80
  encoding/gob.(*Encoder).encodeStruct()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encode.go:328 +0x554
  encoding/gob.encOpFor.func4()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encode.go:581 +0xdb
  encoding/gob.(*Encoder).encodeArray()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encode.go:351 +0x764
  encoding/gob.encOpFor.func1()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encode.go:551 +0x184
  encoding/gob.(*Encoder).encodeStruct()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encode.go:328 +0x554
  encoding/gob.(*Encoder).encode()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encode.go:701 +0x28b
  encoding/gob.(*Encoder).EncodeValue()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encoder.go:251 +0x728
  encoding/gob.(*Encoder).Encode()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encoder.go:176 +0x152
  6.824/labgob.(*LabEncoder).Encode()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/labgob/labgob.go:34 +0x5e
  6.824/labrpc.(*ClientEnd).Call()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/labrpc/labrpc.go:93 +0x191
  6.824/raft.(*Raft).sendAppendEntries()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/raft/raft_append_entries.go:86 +0x573
  6.824/raft.(*Raft).sendHeartbeatTo()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/raft/raft_heartbeat.go:52 +0x4ea
  6.824/raft.(*Raft).sendHeartbeat.func1()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/raft/raft_heartbeat.go:23 +0x64

Goroutine 161 (running) created at:
  6.824/labrpc.(*Network).processReq()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/labrpc/labrpc.go:239 +0x291
  6.824/labrpc.MakeNetwork.func1.1()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/labrpc/labrpc.go:157 +0x9c

Goroutine 67 (running) created at:
  6.824/raft.(*Raft).sendHeartbeat()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/raft/raft_heartbeat.go:23 +0x1c5
  6.824/raft.(*Raft).ticker()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/raft/raft.go:150 +0x35e
  6.824/raft.Make.func1()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/raft/raft.go:177 +0x39
==================
==================
WARNING: DATA RACE
Write at 0x00c000462458 by goroutine 161:
  runtime.slicecopy()
      /usr/local/Cellar/go/1.18.4/libexec/src/runtime/slice.go:295 +0x0
  6.824/raft.(*Raft).AppendEntries()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/raft/raft_append_entries.go:73 +0x85c
  runtime.call32()
      /usr/local/Cellar/go/1.18.4/libexec/src/runtime/asm_amd64.s:702 +0x48
  reflect.Value.Call()
      /usr/local/Cellar/go/1.18.4/libexec/src/reflect/value.go:339 +0xd7
  6.824/labrpc.(*Service).dispatch()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/labrpc/labrpc.go:496 +0x47b
  6.824/labrpc.(*Server).dispatch()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/labrpc/labrpc.go:420 +0x265
  6.824/labrpc.(*Network).processReq.func1()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/labrpc/labrpc.go:240 +0x9c

Previous read at 0x00c000462458 by goroutine 67:
  reflect.Value.IsNil()
      /usr/local/Cellar/go/1.18.4/libexec/src/reflect/value.go:1504 +0xd0
  encoding/gob.encOpFor.func5()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encode.go:585 +0x4b
  encoding/gob.(*Encoder).encodeStruct()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encode.go:328 +0x554
  encoding/gob.encOpFor.func4()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encode.go:581 +0xdb
  encoding/gob.(*Encoder).encodeArray()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encode.go:351 +0x764
  encoding/gob.encOpFor.func1()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encode.go:551 +0x184
  encoding/gob.(*Encoder).encodeStruct()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encode.go:328 +0x554
  encoding/gob.(*Encoder).encode()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encode.go:701 +0x28b
  encoding/gob.(*Encoder).EncodeValue()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encoder.go:251 +0x728
  encoding/gob.(*Encoder).Encode()
      /usr/local/Cellar/go/1.18.4/libexec/src/encoding/gob/encoder.go:176 +0x152
  6.824/labgob.(*LabEncoder).Encode()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/labgob/labgob.go:34 +0x5e
  6.824/labrpc.(*ClientEnd).Call()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/labrpc/labrpc.go:93 +0x191
  6.824/raft.(*Raft).sendAppendEntries()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/raft/raft_append_entries.go:86 +0x573
  6.824/raft.(*Raft).sendHeartbeatTo()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/raft/raft_heartbeat.go:52 +0x4ea
  6.824/raft.(*Raft).sendHeartbeat.func1()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/raft/raft_heartbeat.go:23 +0x64

Goroutine 161 (running) created at:
  6.824/labrpc.(*Network).processReq()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/labrpc/labrpc.go:239 +0x291
  6.824/labrpc.MakeNetwork.func1.1()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/labrpc/labrpc.go:157 +0x9c

Goroutine 67 (running) created at:
  6.824/raft.(*Raft).sendHeartbeat()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/raft/raft_heartbeat.go:23 +0x1c5
  6.824/raft.(*Raft).ticker()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/raft/raft.go:150 +0x35e
  6.824/raft.Make.func1()
      /Users/jinglin/Desktop/Cloud/6.824/Labs/src/raft/raft.go:177 +0x39
==================
4: log map[1:1429296215561528196 2:7940676739967982573 3:8961004691850320999 4:3137815676069887767 5:7302903839604934228 6:2191360375965643591 7:8988552253281192465 8:4785442026904601619 9:4302361527019246196 10:398584640460447291 11:3140706105375741864 12:8325322687152747808 13:1490071456880606401 14:6546555332683719048 15:2867708481761817769 16:2977273294347613911 17:2815849153573559225 18:876705824366661737 19:2936592984854278677 20:6349175565767359598 21:4454835506548910846 22:5209665228931824506 23:2468448627935768093 24:1057004788060224805 25:8455294965876425349 26:7630283015329966857 27:3664358417681418617 28:2385454713114207906 29:5784020133974947340 30:7247919861846907111 31:7195485302097621213 32:8736302056190411981 33:7216813889774750660 34:7336587467088343151 35:5675468395592550973 36:89109810569622966 37:4929692273157808142 38:8177979568999242041 39:7098447437008363387 40:163479713668666759 41:3462759262445366257 42:2080847016850441347 43:3670547209727063041 44:6787992157659722968 45:134775784262056533 46:4413435167132798332 47:8787265608185087417 48:8600042171568074270 49:4197337582918954478 50:983937066931931715 51:4995344931370394309 52:8754404777817036990 53:1991247256731359777 54:8455722275775639932 55:3145878752906079089 56:6263705658787966923 57:7248657956874399750 58:8978854698156878168 59:5105377153923724774 60:7534912251109190359 61:2082368901510413037 62:5761633337638788270 63:1391544846992563659 64:1663410668409566147 65:1206991129026851901 66:333642188687419613 67:780389883939016189 68:8816527316653583347 69:899588672642151064 70:8308560250704945407 71:484586692196264452 72:3577035264113359607 73:3854944839716380135 74:4159510144042760904 75:918336029829862944 76:5933876436003003172 77:7840519020593735434 78:6538552128723250668 79:6595492802941295487 80:2566068124685578577 81:728650337495464083 82:227867112692375368 83:2766921095293142790 84:728336681134107820 85:478018496046363404 86:3540329849166433811 87:5703330109911257304 88:7076480879444686587 89:4753427509682535761 90:1694653044585433531]; server map[1:1429296215561528196 2:7940676739967982573 3:8961004691850320999 4:3137815676069887767 5:7302903839604934228 6:2191360375965643591 7:8988552253281192465 8:4785442026904601619 9:4302361527019246196 10:398584640460447291 11:3140706105375741864 12:8325322687152747808 13:1490071456880606401 14:6546555332683719048 15:2867708481761817769 16:2977273294347613911 17:2815849153573559225 18:876705824366661737 19:2936592984854278677 20:6349175565767359598 21:4454835506548910846 22:5209665228931824506 23:2468448627935768093 24:1057004788060224805 25:8455294965876425349 26:7630283015329966857 27:3664358417681418617 28:2385454713114207906 29:5784020133974947340 30:7247919861846907111 31:7195485302097621213 32:8736302056190411981 33:7216813889774750660 34:7336587467088343151 35:5675468395592550973 36:89109810569622966 37:4929692273157808142 38:8177979568999242041 39:7098447437008363387 40:163479713668666759 41:3462759262445366257 42:2080847016850441347 43:3670547209727063041 44:6787992157659722968 45:134775784262056533 46:4413435167132798332 47:8787265608185087417 48:8600042171568074270 49:4197337582918954478 50:983937066931931715 51:4995344931370394309 52:8754404777817036990 53:1991247256731359777 54:8455722275775639932 55:3145878752906079089 56:6263705658787966923 57:7248657956874399750 58:8978854698156878168 59:5105377153923724774 60:7534912251109190359 61:2082368901510413037 62:5761633337638788270 63:1391544846992563659 64:1663410668409566147 65:1206991129026851901 66:333642188687419613 67:780389883939016189 68:8816527316653583347 69:899588672642151064 70:8308560250704945407 71:484586692196264452 72:3577035264113359607 73:3854944839716380135 74:4159510144042760904 75:918336029829862944 76:5933876436003003172 77:7840519020593735434 78:6538552128723250668 79:6595492802941295487 80:2566068124685578577 81:728650337495464083 82:227867112692375368 83:2766921095293142790 84:728336681134107820 85:478018496046363404 86:3540329849166433811 87:5703330109911257304 88:7076480879444686587 89:4753427509682535761 90:1694653044585433531 91:2098660973642184621]
[map[1:1429296215561528196 2:7940676739967982573 3:8961004691850320999 4:3137815676069887767 5:7302903839604934228 6:2191360375965643591 7:8988552253281192465 8:4785442026904601619 9:4302361527019246196 10:398584640460447291 11:3140706105375741864 12:8325322687152747808 13:1490071456880606401 14:6546555332683719048 15:2867708481761817769 16:2977273294347613911 17:2815849153573559225 18:876705824366661737 19:2936592984854278677 20:6349175565767359598 21:4454835506548910846 22:5209665228931824506 23:2468448627935768093 24:1057004788060224805 25:8455294965876425349 26:7630283015329966857 27:3664358417681418617 28:2385454713114207906 29:5784020133974947340 30:7247919861846907111 31:7195485302097621213 32:8736302056190411981 33:7216813889774750660 34:7336587467088343151 35:5675468395592550973 36:89109810569622966 37:4929692273157808142 38:8177979568999242041 39:7098447437008363387 40:163479713668666759 41:3462759262445366257 42:2080847016850441347 43:3670547209727063041 44:6787992157659722968 45:134775784262056533 46:4413435167132798332 47:8787265608185087417 48:8600042171568074270 49:4197337582918954478 50:983937066931931715 51:4995344931370394309 52:8754404777817036990 53:1991247256731359777 54:8455722275775639932 55:3145878752906079089 56:6263705658787966923 57:7248657956874399750 58:8978854698156878168 59:5105377153923724774 60:7534912251109190359 61:2082368901510413037 62:5761633337638788270 63:1391544846992563659 64:1663410668409566147 65:1206991129026851901 66:333642188687419613 67:780389883939016189 68:8816527316653583347 69:899588672642151064 70:8308560250704945407 71:484586692196264452 72:3577035264113359607 73:3854944839716380135 74:4159510144042760904 75:918336029829862944 76:5933876436003003172 77:7840519020593735434 78:6538552128723250668 79:6595492802941295487 80:2566068124685578577 81:728650337495464083 82:227867112692375368 83:2766921095293142790 84:728336681134107820 85:478018496046363404 86:3540329849166433811 87:5703330109911257304 88:7076480879444686587 89:4753427509682535761 90:1694653044585433531 91:2098660973642184621] map[1:1429296215561528196 2:7940676739967982573 3:8961004691850320999 4:3137815676069887767 5:7302903839604934228 6:2191360375965643591 7:8988552253281192465 8:4785442026904601619 9:4302361527019246196 10:398584640460447291 11:3140706105375741864 12:8325322687152747808 13:1490071456880606401 14:6546555332683719048 15:2867708481761817769 16:2977273294347613911 17:2815849153573559225 18:876705824366661737 19:2936592984854278677 20:6349175565767359598 21:4454835506548910846 22:5209665228931824506 23:2468448627935768093 24:1057004788060224805 25:8455294965876425349 26:7630283015329966857 27:3664358417681418617 28:2385454713114207906 29:5784020133974947340 30:7247919861846907111 31:7195485302097621213 32:8736302056190411981 33:7216813889774750660 34:7336587467088343151 35:5675468395592550973 36:89109810569622966 37:4929692273157808142 38:8177979568999242041 39:7098447437008363387 40:163479713668666759 41:3462759262445366257 42:2080847016850441347 43:3670547209727063041 44:6787992157659722968 45:134775784262056533 46:4413435167132798332 47:8787265608185087417 48:8600042171568074270 49:4197337582918954478 50:983937066931931715 51:4995344931370394309 52:8754404777817036990 53:1991247256731359777 54:8455722275775639932 55:3145878752906079089 56:6263705658787966923 57:7248657956874399750 58:8978854698156878168 59:5105377153923724774 60:7534912251109190359 61:2082368901510413037 62:5761633337638788270 63:1391544846992563659 64:1663410668409566147 65:1206991129026851901 66:333642188687419613 67:780389883939016189 68:8816527316653583347 69:899588672642151064 70:8308560250704945407 71:484586692196264452 72:3577035264113359607 73:3854944839716380135 74:4159510144042760904 75:918336029829862944 76:5933876436003003172 77:7840519020593735434 78:6538552128723250668 79:6595492802941295487 80:2566068124685578577 81:728650337495464083 82:227867112692375368 83:2766921095293142790 84:728336681134107820 85:478018496046363404 86:3540329849166433811 87:5703330109911257304 88:7076480879444686587] map[1:1429296215561528196 2:7940676739967982573 3:8961004691850320999 4:3137815676069887767 5:7302903839604934228 6:2191360375965643591 7:8988552253281192465 8:4785442026904601619 9:4302361527019246196 10:398584640460447291 11:3140706105375741864 12:8325322687152747808 13:1490071456880606401 14:6546555332683719048 15:2867708481761817769 16:2977273294347613911 17:2815849153573559225 18:876705824366661737 19:2936592984854278677 20:6349175565767359598 21:4454835506548910846 22:5209665228931824506 23:2468448627935768093 24:1057004788060224805 25:8455294965876425349 26:7630283015329966857 27:3664358417681418617 28:2385454713114207906 29:5784020133974947340 30:7247919861846907111 31:7195485302097621213 32:8736302056190411981 33:7216813889774750660 34:7336587467088343151 35:5675468395592550973 36:89109810569622966 37:4929692273157808142 38:8177979568999242041 39:7098447437008363387 40:163479713668666759 41:3462759262445366257 42:2080847016850441347 43:3670547209727063041 44:6787992157659722968 45:134775784262056533 46:4413435167132798332 47:8787265608185087417] map[1:1429296215561528196 2:7940676739967982573 3:8961004691850320999 4:3137815676069887767 5:7302903839604934228 6:2191360375965643591 7:8988552253281192465 8:4785442026904601619 9:4302361527019246196 10:398584640460447291 11:3140706105375741864 12:8325322687152747808 13:1490071456880606401 14:6546555332683719048 15:2867708481761817769 16:2977273294347613911 17:2815849153573559225 18:876705824366661737 19:2936592984854278677 20:6349175565767359598 21:4454835506548910846 22:5209665228931824506 23:2468448627935768093 24:1057004788060224805 25:8455294965876425349 26:7630283015329966857 27:3664358417681418617 28:2385454713114207906 29:5784020133974947340 30:7247919861846907111 31:7195485302097621213 32:8736302056190411981 33:7216813889774750660 34:7336587467088343151 35:5675468395592550973 36:89109810569622966 37:4929692273157808142 38:8177979568999242041 39:7098447437008363387 40:163479713668666759 41:3462759262445366257 42:2080847016850441347 43:3670547209727063041 44:6787992157659722968 45:134775784262056533 46:4413435167132798332 47:8787265608185087417 48:8600042171568074270 49:4197337582918954478 50:983937066931931715 51:4995344931370394309 52:8754404777817036990 53:1991247256731359777 54:8455722275775639932 55:3145878752906079089 56:6263705658787966923 57:7248657956874399750 58:8978854698156878168 59:5105377153923724774 60:7534912251109190359 61:2082368901510413037 62:5761633337638788270 63:1391544846992563659 64:1663410668409566147 65:1206991129026851901 66:333642188687419613 67:780389883939016189 68:8816527316653583347 69:899588672642151064 70:8308560250704945407 71:484586692196264452 72:3577035264113359607 73:3854944839716380135 74:4159510144042760904 75:918336029829862944 76:5933876436003003172 77:7840519020593735434 78:6538552128723250668 79:6595492802941295487 80:2566068124685578577 81:728650337495464083 82:227867112692375368 83:2766921095293142790 84:728336681134107820 85:478018496046363404 86:3540329849166433811 87:5703330109911257304 88:7076480879444686587] map[1:1429296215561528196 2:7940676739967982573 3:8961004691850320999 4:3137815676069887767 5:7302903839604934228 6:2191360375965643591 7:8988552253281192465 8:4785442026904601619 9:4302361527019246196 10:398584640460447291 11:3140706105375741864 12:8325322687152747808 13:1490071456880606401 14:6546555332683719048 15:2867708481761817769 16:2977273294347613911 17:2815849153573559225 18:876705824366661737 19:2936592984854278677 20:6349175565767359598 21:4454835506548910846 22:5209665228931824506 23:2468448627935768093 24:1057004788060224805 25:8455294965876425349 26:7630283015329966857 27:3664358417681418617 28:2385454713114207906 29:5784020133974947340 30:7247919861846907111 31:7195485302097621213 32:8736302056190411981 33:7216813889774750660 34:7336587467088343151 35:5675468395592550973 36:89109810569622966 37:4929692273157808142 38:8177979568999242041 39:7098447437008363387 40:163479713668666759 41:3462759262445366257 42:2080847016850441347 43:3670547209727063041 44:6787992157659722968 45:134775784262056533 46:4413435167132798332 47:8787265608185087417 48:8600042171568074270 49:4197337582918954478 50:983937066931931715 51:4995344931370394309 52:8754404777817036990 53:1991247256731359777 54:8455722275775639932 55:3145878752906079089 56:6263705658787966923 57:7248657956874399750 58:8978854698156878168 59:5105377153923724774 60:7534912251109190359 61:2082368901510413037 62:5761633337638788270 63:1391544846992563659 64:1663410668409566147 65:1206991129026851901 66:333642188687419613 67:780389883939016189 68:8816527316653583347 69:899588672642151064 70:8308560250704945407 71:484586692196264452 72:3577035264113359607 73:3854944839716380135 74:4159510144042760904 75:918336029829862944 76:5933876436003003172 77:7840519020593735434 78:6538552128723250668 79:6595492802941295487 80:2566068124685578577 81:728650337495464083 82:227867112692375368 83:2766921095293142790 84:728336681134107820 85:478018496046363404 86:3540329849166433811 87:5703330109911257304 88:7076480879444686587 89:4753427509682535761 90:1694653044585433531 91:2213729696376563435]]
apply error: commit index=91 server=4 2213729696376563435 != server=0 2098660973642184621
exit status 1
FAIL	6.824/raft	11.286s
